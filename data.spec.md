# AI Newsroom Data Storage Strategy

## Overview
This document outlines the Redis data storage strategy for the AI Newsroom application. All data will be stored in Redis using keys with structured naming conventions and appropriate data types for efficient access and querying.

## Data Types and Structures

### Editor
The editor is a single entity with bio and prompt information.

**Keys:**
- `editor:bio` - String containing the editor's biography
- `editor:prompt` - String containing the editor's system prompt

### Reporters
Reporters are stored with their beats and prompts. Each reporter has a unique ID.

**Keys:**
- `reporters` - Set containing all reporter IDs
- `reporter:{id}:beats` - Set containing the reporter's beat strings
- `reporter:{id}:prompt` - String containing the reporter's system prompt

### Articles
Articles are generated by reporters and stored with metadata.

**Keys:**
- `articles:{reporter_id}` - Sorted set where:
  - Score: Generation time (milliseconds since epoch)
  - Member: Article ID
- `article:{article_id}:headline` - String containing the article headline
- `article:{article_id}:body` - String containing the article body
- `article:{article_id}:time` - String containing the generation time (milliseconds since epoch)

### Newspaper Editions
Newspaper editions are generated by the editor every 3 hours, containing selected articles.

**Keys:**
- `editions` - Sorted set where:
  - Score: Generation time (milliseconds since epoch)
  - Member: Edition ID
- `edition:{edition_id}:stories` - Set containing article IDs included in this edition
- `edition:{edition_id}:time` - String containing the generation time (milliseconds since epoch)

### Daily Editions
Daily editions are generated by the editor every 24 hours, containing selected newspaper editions.

**Keys:**
- `daily_editions` - Sorted set where:
  - Score: Generation time (milliseconds since epoch)
  - Member: Daily Edition ID
- `daily_edition:{daily_edition_id}:editions` - Set containing edition IDs included in this daily edition
- `daily_edition:{daily_edition_id}:time` - String containing the generation time (milliseconds since epoch)

## Key Naming Conventions
- Use colons (`:`) as separators for hierarchical key names
- Use descriptive prefixes (`editor:`, `reporter:`, `article:`, `edition:`, `daily_edition:`)
- Include IDs in curly braces for dynamic key generation
- Use consistent data types (Strings for text, Sets for collections, Sorted Sets for time-ordered data)

## Data Access Patterns
- **Editor lookup**: Direct key access with `GET editor:bio` and `GET editor:prompt`
- **Reporter enumeration**: `SMEMBERS reporters` to get all reporter IDs
- **Reporter details**: Direct key access with `SMEMBERS reporter:{id}:beats` and `GET reporter:{id}:prompt`
- **Recent articles by reporter**: `ZREVRANGE articles:{reporter_id} 0 -1 WITHSCORES` for most recent articles
- **Articles in time range**: `ZRANGEBYSCORE articles:{reporter_id} {start_time} {end_time}`
- **Edition lookup**: `ZREVRANGE editions 0 -1 WITHSCORES` for most recent editions
- **Daily edition lookup**: `ZREVRANGE daily_editions 0 -1 WITHSCORES` for most recent daily editions

## Performance Considerations
- Use connection pooling for Redis connections
- Implement proper error handling for Redis operations
- Consider using Redis pipelines for batch operations
- Monitor memory usage as data accumulates over time
- Implement data cleanup strategies for old articles/editions if needed

## Data Persistence
- Configure Redis persistence (RDB or AOF) based on data criticality requirements
- Consider backup strategies for Redis data
- Plan for data migration if schema changes are needed

## Security
- Use Redis authentication with username/password as specified
- Implement proper access controls
- Encrypt sensitive data if required
- Monitor Redis access logs for security

This strategy provides efficient storage and retrieval of all newsroom data while maintaining clear organization and scalability.
